<div class="simulation-form">
  <h2>Investment Simulator</h2>

  <!-- Mode Toggle -->
  <div class="mode-toggle">
    <button
      type="button"
      [class.active]="mode === 'years'"
      (click)="setMode('years')"
    >
      By Years
    </button>
    <button
      type="button"
      [class.active]="mode === 'target'"
      (click)="setMode('target')"
    >
      By Target Date
    </button>
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <!-- Common Fields -->
    <div class="form-group">
      <label for="initialInvestment">Initial Investment</label>
      <div class="input-with-prefix">
        <span class="prefix">€</span>
        <input
          id="initialInvestment"
          type="number"
          formControlName="initialInvestment"
          min="0"
          step="100"
        />
      </div>
    </div>

    <div class="form-group">
      <label for="monthlyContribution">Monthly Contribution</label>
      <div class="input-with-prefix">
        <span class="prefix">€</span>
        <input
          id="monthlyContribution"
          type="number"
          formControlName="monthlyContribution"
          min="0"
          step="50"
        />
      </div>
    </div>

    <div class="form-group">
      <label for="annualReturnRate">Expected Annual Return</label>
      <div class="input-with-suffix">
        <input
          id="annualReturnRate"
          type="number"
          formControlName="annualReturnRate"
          min="0"
          max="100"
          step="0.5"
        />
        <span class="suffix">%</span>
      </div>
    </div>

    <!-- Mode-specific fields container -->
    <div class="mode-fields">
      <!-- Years Mode -->
      @if (mode === 'years') {
        <div class="form-group fade-in">
          <label for="years">Investment Period</label>
          <div class="input-with-suffix">
            <input
              id="years"
              type="number"
              formControlName="years"
              min="1"
              max="50"
            />
            <span class="suffix">years</span>
          </div>
        </div>
      }

      <!-- Target Date Mode -->
      @if (mode === 'target') {
        <div class="form-row fade-in">
          <div class="form-group">
            <label for="targetMonth">Target Month</label>
            <select id="targetMonth" formControlName="targetMonth">
              @for (month of months; track month.value) {
                <option [ngValue]="month.value">{{ month.label }}</option>
              }
            </select>
          </div>

          <div class="form-group">
            <label for="targetYear">Target Year</label>
            <input
              id="targetYear"
              type="number"
              formControlName="targetYear"
              [min]="currentYear + 1"
              [max]="currentYear + 50"
            />
          </div>
        </div>
      }
    </div>

    <button type="submit" class="submit-btn" [disabled]="form.invalid">
      Calculate
    </button>
  </form>
</div>
